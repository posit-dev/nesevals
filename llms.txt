# nesevals

nesevals provides tooling for evaluating next edit suggestion (NES)
scaffolds across different edit history formats, output formats, and
models.

## Installation

Install the package with:

``` r
# if needed:
# install.packages("pak")

pak::pak("posit-dev/nesevals")
```

## Example

The package ships with a data frame `nes_results` that summarizes
experimental results:

``` r
library(dplyr)
library(nesevals)

glimpse(nes_results)
#> Rows: 18
#> Columns: 11
#> $ model              <chr> "claude-haiku-4-5-20251001", "openai/gpt-oss-20b", …
#> $ prompt             <chr> "rewrite-region", "rewrite-region", "rewrite-region…
#> $ edit_history       <chr> "narrative", "narrative", "narrative", "narrative",…
#> $ output_format      <chr> "rewrite_region", "rewrite_region", "rewrite_region…
#> $ n_completions      <int> 80, 80, 240, 240, 80, 80, 240, 240, 240, 240, 240, …
#> $ n_processable      <int> 80, 80, 240, 240, 80, 80, 240, 240, 240, 240, 240, …
#> $ n_exact            <int> 54, 46, 123, 123, 32, 30, 120, 114, 111, 93, 102, 9…
#> $ mean_score         <dbl> 4.49, 4.28, 4.03, 3.96, 3.52, 3.50, 3.41, 3.39, 3.3…
#> $ median_latency_ms  <dbl> 1476, 550, 144, 144, 1370, 1576, 158, 156, 168, 141…
#> $ mean_input_tokens  <dbl> 1358, 1050, 1181, 1155, 1128, 1127, 921, 905, 1097,…
#> $ mean_output_tokens <dbl> 140, 169, 108, 107, 95, 119, 219, 219, 225, 130, 12…
```

# Package index

## Data

- [`nes_results`](https://posit-dev.github.io/nesevals/reference/nes_results.md)
  : Evaluation results
- [`nes_samples`](https://posit-dev.github.io/nesevals/reference/nes_samples.md)
  [`samples_view()`](https://posit-dev.github.io/nesevals/reference/nes_samples.md)
  : Evaluation samples

## Generate, grade, and read completions

- [`completions_generate()`](https://posit-dev.github.io/nesevals/reference/completions_generate.md)
  : Generate completions from NES model endpoints
- [`completions_grade()`](https://posit-dev.github.io/nesevals/reference/completions_grade.md)
  : Grade NES completions
- [`completions_load_test()`](https://posit-dev.github.io/nesevals/reference/completions_load_test.md)
  : Replay stored completions at a fixed request rate
- [`completions_read()`](https://posit-dev.github.io/nesevals/reference/completions_read.md)
  : Read saved completions

## Prompt formatting

- [`format_edit_history()`](https://posit-dev.github.io/nesevals/reference/format_edit_history.md)
  [`format_edit_history_diffs()`](https://posit-dev.github.io/nesevals/reference/format_edit_history.md)
  [`format_edit_history_before_after()`](https://posit-dev.github.io/nesevals/reference/format_edit_history.md)
  [`format_edit_history_narrative()`](https://posit-dev.github.io/nesevals/reference/format_edit_history.md)
  : Format edit history
- [`format_user_query()`](https://posit-dev.github.io/nesevals/reference/format_user_query.md)
  : Format a user query for NES completion
- [`format_variables()`](https://posit-dev.github.io/nesevals/reference/format_variables.md)
  : Format variables for a prompt

