[{"path":"https://posit-dev.github.io/nesevals/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2026 nesevals authors Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://posit-dev.github.io/nesevals/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Simon Couch. Author, maintainer.","code":""},{"path":"https://posit-dev.github.io/nesevals/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Couch S (2026). nesevals: Evaluate Next Edit Suggestion Scaffolds. R package version 0.0.0.9000, https://github.com/posit-dev/nesevals.","code":"@Manual{,   title = {nesevals: Evaluate Next Edit Suggestion Scaffolds},   author = {Simon Couch},   year = {2026},   note = {R package version 0.0.0.9000},   url = {https://github.com/posit-dev/nesevals}, }"},{"path":"https://posit-dev.github.io/nesevals/index.html","id":"nesevals","dir":"","previous_headings":"","what":"Evaluate Next Edit Suggestion Scaffolds","title":"Evaluate Next Edit Suggestion Scaffolds","text":"nesevals provides tooling evaluating next edit suggestion (NES) scaffolds across different edit history formats, output formats, models.","code":""},{"path":"https://posit-dev.github.io/nesevals/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Evaluate Next Edit Suggestion Scaffolds","text":"Install package :","code":"# if needed: # install.packages(\"pak\")  pak::pak(\"posit-dev/nesevals\")"},{"path":"https://posit-dev.github.io/nesevals/index.html","id":"example","dir":"","previous_headings":"","what":"Example","title":"Evaluate Next Edit Suggestion Scaffolds","text":"package ships data frame nes_results summarizes experimental results:","code":"library(dplyr) library(nesevals)  glimpse(nes_results) #> Rows: 18 #> Columns: 11 #> $ model              <chr> \"claude-haiku-4-5-20251001\", \"openai/gpt-oss-20b\", … #> $ prompt             <chr> \"rewrite-region\", \"rewrite-region\", \"rewrite-region… #> $ edit_history       <chr> \"narrative\", \"narrative\", \"narrative\", \"narrative\",… #> $ output_format      <chr> \"rewrite_region\", \"rewrite_region\", \"rewrite_region… #> $ n_completions      <int> 80, 80, 240, 240, 80, 80, 240, 240, 240, 240, 240, … #> $ n_processable      <int> 80, 80, 240, 240, 80, 80, 240, 240, 240, 240, 240, … #> $ n_exact            <int> 54, 46, 123, 123, 32, 30, 120, 114, 111, 93, 102, 9… #> $ mean_score         <dbl> 4.49, 4.28, 4.03, 3.96, 3.52, 3.50, 3.41, 3.39, 3.3… #> $ median_latency_ms  <dbl> 1476, 550, 144, 144, 1370, 1576, 158, 156, 168, 141… #> $ mean_input_tokens  <dbl> 1358, 1050, 1181, 1155, 1128, 1127, 921, 905, 1097,… #> $ mean_output_tokens <dbl> 140, 169, 108, 107, 95, 119, 219, 219, 225, 130, 12…"},{"path":"https://posit-dev.github.io/nesevals/reference/completions_generate.html","id":null,"dir":"Reference","previous_headings":"","what":"Generate completions from NES model endpoints — completions_generate","title":"Generate completions from NES model endpoints — completions_generate","text":"Send evaluation samples model endpoint collect completions along response latency. Results written JSON files inst/results/completions/ inst/results/metadata/.","code":""},{"path":"https://posit-dev.github.io/nesevals/reference/completions_generate.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generate completions from NES model endpoints — completions_generate","text":"","code":"completions_generate(   samples,   model = c(\"qwen3-8b\", \"zeta\"),   prompt = c(\"zeta-supercomplete\", \"qwen-supercomplete\", \"rewrite-window\",     \"tool-calling\", \"rewrite-region\", \"rewrite-region-5bt\"),   edit_history_format = c(\"diffs\", \"before_after\", \"narrative\"),   output_format = c(\"editable_region\", \"window\", \"tool_calling\", \"rewrite_region\",     \"rewrite_region_5bt\"),   include_variables = TRUE,   n_replicates = 1L,   context_lines = 1L )"},{"path":"https://posit-dev.github.io/nesevals/reference/completions_generate.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generate completions from NES model endpoints — completions_generate","text":"samples data frame evaluation samples format nes_samples. model Either string naming Baseten model (\"qwen3-8b\" \"zeta\") ellmer ellmer::Chat object (e.g. ellmer::chat_openai() ellmer::chat_claude()). Chat object provided, model name derived chat$get_model(). \"tool_calling\" output format supported Chat objects. prompt One \"zeta-supercomplete\", \"qwen-supercomplete\", \"rewrite-window\", \"tool-calling\", \"rewrite-region\". Determines system prompt file use inst/prompts/. edit_history_format One \"diffs\", \"before_after\", \"narrative\". output_format One \"editable_region\", \"window\", \"tool_calling\", \"rewrite_region\". include_variables Logical. Whether include variables prompt. n_replicates Integer. Number completions generate per sample. context_lines Integer. Number context lines /narrative edit history formats.","code":""},{"path":"https://posit-dev.github.io/nesevals/reference/completions_generate.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generate completions from NES model endpoints — completions_generate","text":"Invisibly, data frame columns sample_id, replicate, response (character), latency (numeric, seconds), tokens_input (integer), tokens_output (integer), request (list-column containing request body).","code":""},{"path":"https://posit-dev.github.io/nesevals/reference/completions_grade.html","id":null,"dir":"Reference","previous_headings":"","what":"Grade NES completions — completions_grade","title":"Grade NES completions — completions_grade","text":"Score completions target outputs using multi-tiered system: Processability: response non-NA non-empty? Exact match: response exactly match target? , score 5 without LLM call. LLM quality grading: non-exact-match processable completions, LLM judge scores completion 0–5 scale.","code":""},{"path":"https://posit-dev.github.io/nesevals/reference/completions_grade.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Grade NES completions — completions_grade","text":"","code":"completions_grade(   completions,   samples,   name = attr(completions, \"name\"),   max_active = 5L )"},{"path":"https://posit-dev.github.io/nesevals/reference/completions_grade.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Grade NES completions — completions_grade","text":"completions data frame returned completions_generate() completions_read(), least columns sample_id, replicate, response. samples data frame evaluation samples format nes_samples. Must contain sample_id values present completions. name Character. Name saved scores file. Defaults \"name\" attribute completions (set automatically completions_generate() completions_read()). NULL, scores saved disk. max_active Integer. Maximum number simultaneous LLM grading requests.","code":""},{"path":"https://posit-dev.github.io/nesevals/reference/completions_grade.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Grade NES completions — completions_grade","text":"data frame columns sample_id, replicate, processable, exact_match, score (integer, 0–5), reasoning (character), tags (list-column character vectors).","code":""},{"path":"https://posit-dev.github.io/nesevals/reference/completions_load_test.html","id":null,"dir":"Reference","previous_headings":"","what":"Replay stored completions at a fixed request rate — completions_load_test","title":"Replay stored completions at a fixed request rate — completions_load_test","text":"Send previously collected completion requests controlled interval. useful load testing: run Qwen3-8B endpoint, Zeta rate, compare GPU utilisation Baseten. Requests dispatched asynchronously using curl's multi interface, new requests go schedule even previous responses still flight.","code":""},{"path":"https://posit-dev.github.io/nesevals/reference/completions_load_test.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Replay stored completions at a fixed request rate — completions_load_test","text":"","code":"completions_load_test(   completions,   model = c(\"qwen3-8b\", \"zeta\"),   interval = 0.2,   n = NULL )"},{"path":"https://posit-dev.github.io/nesevals/reference/completions_load_test.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Replay stored completions at a fixed request rate — completions_load_test","text":"completions data frame returned completions_read() contains request list-column original request bodies. model One \"qwen3-8b\" \"zeta\". Determines Baseten endpoint target. interval Target number seconds consecutive requests. example, 0.2 sends 5 requests per second. n Number requests send. Defaults nrow(completions). n exceeds number stored requests, recycled.","code":""},{"path":"https://posit-dev.github.io/nesevals/reference/completions_load_test.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Replay stored completions at a fixed request rate — completions_load_test","text":"Invisibly, data frame columns request_index, scheduled_time, actual_send_time, latency, tokens_input, tokens_output.","code":""},{"path":"https://posit-dev.github.io/nesevals/reference/completions_read.html","id":null,"dir":"Reference","previous_headings":"","what":"Read saved completions — completions_read","title":"Read saved completions — completions_read","text":"Load previously saved completions result set inst/results/completions/.","code":""},{"path":"https://posit-dev.github.io/nesevals/reference/completions_read.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Read saved completions — completions_read","text":"","code":"completions_read(name)"},{"path":"https://posit-dev.github.io/nesevals/reference/completions_read.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Read saved completions — completions_read","text":"name name result set, e.g. \"qwen3-8b_diffs_editable-region_zeta-supercomplete\". corresponds filename (without .json) inst/results/completions/.","code":""},{"path":"https://posit-dev.github.io/nesevals/reference/completions_read.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Read saved completions — completions_read","text":"data frame columns sample_id, replicate, response, latency, tokens_input, tokens_output.","code":""},{"path":"https://posit-dev.github.io/nesevals/reference/format_edit_history.html","id":null,"dir":"Reference","previous_headings":"","what":"Format edit history — format_edit_history","title":"Format edit history — format_edit_history","text":"Convert raw unified-diff edit histories different text formats use NES prompts. format_edit_history() dispatches appropriate format-specific function. format-specific functions can also called directly. format_edit_history_diffs() returns raw edit history standard header. format_edit_history_before_after() converts edit /code blocks, omitting redundant \":\" sections match previous edit's \":\". format_edit_history_narrative() produces natural-language description edit.","code":""},{"path":"https://posit-dev.github.io/nesevals/reference/format_edit_history.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Format edit history — format_edit_history","text":"","code":"format_edit_history(   edit_history,   format = c(\"diffs\", \"before_after\", \"narrative\"),   ... )  format_edit_history_diffs(edit_history)  format_edit_history_before_after(edit_history, context_lines = 1L)  format_edit_history_narrative(edit_history, context_lines = 1L, fence = \"```\")"},{"path":"https://posit-dev.github.io/nesevals/reference/format_edit_history.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Format edit history — format_edit_history","text":"edit_history Character string. raw unified-diff edit history sample's input. format One \"diffs\", \"before_after\", \"narrative\". ... Additional arguments passed format-specific function. context_lines Integer. Number context lines retain around changes. Used \"before_after\" \"narrative\" formats.","code":""},{"path":"https://posit-dev.github.io/nesevals/reference/format_edit_history.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Format edit history — format_edit_history","text":"single character string formatted edit history, \"\" input NULL empty.","code":""},{"path":"https://posit-dev.github.io/nesevals/reference/format_user_query.html","id":null,"dir":"Reference","previous_headings":"","what":"Format a user query for NES completion — format_user_query","title":"Format a user query for NES completion — format_user_query","text":"Assemble prompt's user query sample's input components (edit history, variables, code excerpt) according chosen edit history output formats.","code":""},{"path":"https://posit-dev.github.io/nesevals/reference/format_user_query.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Format a user query for NES completion — format_user_query","text":"","code":"format_user_query(   input,   model = \"qwen3-8b\",   edit_history_format = c(\"diffs\", \"before_after\", \"narrative\"),   output_format = c(\"editable_region\", \"window\", \"tool_calling\", \"rewrite_region\",     \"rewrite_region_5bt\"),   include_variables = TRUE,   context_lines = 1L )"},{"path":"https://posit-dev.github.io/nesevals/reference/format_user_query.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Format a user query for NES completion — format_user_query","text":"input list components edit_history, excerpt, variables, found samples$input[[]]. model string identifying model. affects variables header: \"zeta\" uses shorter header, values use detailed header. edit_history_format One \"diffs\", \"before_after\", \"narrative\". output_format One \"editable_region\", \"window\", \"tool_calling\", \"rewrite_region\", \"rewrite_region_5bt\". include_variables Logical. Whether include variables section. context_lines Integer. Number context lines \"before_after\" \"narrative\" edit history formats.","code":""},{"path":"https://posit-dev.github.io/nesevals/reference/format_user_query.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Format a user query for NES completion — format_user_query","text":"single character string containing assembled user query.","code":""},{"path":"https://posit-dev.github.io/nesevals/reference/format_variables.html","id":null,"dir":"Reference","previous_headings":"","what":"Format variables for a prompt — format_variables","title":"Format variables for a prompt — format_variables","text":"Format variables prompt","code":""},{"path":"https://posit-dev.github.io/nesevals/reference/format_variables.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Format variables for a prompt — format_variables","text":"","code":"format_variables(variables)"},{"path":"https://posit-dev.github.io/nesevals/reference/format_variables.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Format variables for a prompt — format_variables","text":"variables character vector list variables sample's input.","code":""},{"path":"https://posit-dev.github.io/nesevals/reference/format_variables.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Format variables for a prompt — format_variables","text":"single character string one variable per line, \"\" input NULL empty.","code":""},{"path":"https://posit-dev.github.io/nesevals/reference/model_url.html","id":null,"dir":"Reference","previous_headings":"","what":"Model endpoint URLs — model_url","title":"Model endpoint URLs — model_url","text":"Retrieve endpoint URL given model. URLs read environment variables need stored package source. expected environment variables : NESEVALS_ZETA_URL – endpoint URL Zeta model NESEVALS_QWEN3_8B_URL – endpoint URL Qwen3-8B model convenient place set .Renviron file (see usethis::edit_r_environ()). endpoints go sleep 15 minutes. begin working features use models, may want ping endpoints wake instance (take minutes).","code":""},{"path":"https://posit-dev.github.io/nesevals/reference/model_url.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Model endpoint URLs — model_url","text":"","code":"model_url(model = c(\"qwen3-8b\", \"zeta\"))"},{"path":"https://posit-dev.github.io/nesevals/reference/model_url.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Model endpoint URLs — model_url","text":"model Character. One \"zeta\" \"qwen3-8b\".","code":""},{"path":"https://posit-dev.github.io/nesevals/reference/model_url.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Model endpoint URLs — model_url","text":"single character string: endpoint URL.","code":""},{"path":"https://posit-dev.github.io/nesevals/reference/model_url.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Model endpoint URLs — model_url","text":"","code":"if (FALSE) { # \\dontrun{ model_url(\"zeta\") model_url(\"qwen3-8b\") } # }"},{"path":"https://posit-dev.github.io/nesevals/reference/nes_results.html","id":null,"dir":"Reference","previous_headings":"","what":"Evaluation results — nes_results","title":"Evaluation results — nes_results","text":"data frame summarizing evaluation results across model/prompt/format configurations stored inst/results/. row one configuration, aggregate metrics computed underlying completions scores. Regenerate source(\"data-raw/results.R\") adding updating result sets.","code":""},{"path":"https://posit-dev.github.io/nesevals/reference/nes_results.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Evaluation results — nes_results","text":"","code":"nes_results"},{"path":"https://posit-dev.github.io/nesevals/reference/nes_results.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Evaluation results — nes_results","text":"data frame one row per configuration 11 columns: model Character. Model name identifier. prompt Character. System prompt used. edit_history Character. Edit history format (\"diffs\", \"before_after\", \"narrative\"). output_format Character. Output format (\"editable_region\", \"window\", \"tool_calling\", \"rewrite_region\", \"rewrite_region_5bt\"). n_completions Integer. Total number completions generated. multiples 80; experimental setups tested across 3 replicates. n_processable Integer. Number completions produced response parseable RStudio's NES extension. n_exact Integer. Number exact matches target. case, responses receive score 5. mean_score Numeric. Mean quality score (0-5) across completions, non-processable completions score 0. median_latency_ms Numeric. Median response latency milliseconds. mean_input_tokens Numeric. Mean input token count. mean_output_tokens Numeric. Mean output token count.","code":""},{"path":"https://posit-dev.github.io/nesevals/reference/nes_samples.html","id":null,"dir":"Reference","previous_headings":"","what":"Evaluation samples — nes_samples","title":"Evaluation samples — nes_samples","text":"nes_samples data frame 85 NES evaluation samples, contiguous target change. samples_view() opens HTML viewer displaying samples' input excerpts target outputs diff highlighting, along edit history variables. Use Prev/Next buttons (left/right arrow keys) navigate samples.","code":""},{"path":"https://posit-dev.github.io/nesevals/reference/nes_samples.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Evaluation samples — nes_samples","text":"","code":"nes_samples  samples_view(x = nes_samples, n = 1L)"},{"path":"https://posit-dev.github.io/nesevals/reference/nes_samples.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Evaluation samples — nes_samples","text":"data frame 85 rows 4 columns: id Character. Sample identifier derived source filename. input List-column. element list components edit_history, excerpt, variables. output Character. target editable region content. tags List-column character vectors.","code":""},{"path":"https://posit-dev.github.io/nesevals/reference/nes_samples.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Evaluation samples — nes_samples","text":"x nes_samples data frame. n Initial row index display.","code":""},{"path":"https://posit-dev.github.io/nesevals/reference/nes_samples.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Evaluation samples — nes_samples","text":"x, invisibly.","code":""}]
