% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/grading.R
\name{completions_grade}
\alias{completions_grade}
\title{Grade NES completions}
\usage{
completions_grade(
  completions,
  samples,
  name = attr(completions, "name"),
  max_active = 5L
)
}
\arguments{
\item{completions}{A data frame as returned by \code{\link[=completions_generate]{completions_generate()}} or
\code{\link[=completions_read]{completions_read()}}, with at least columns \code{sample_id}, \code{replicate}, and
\code{response}.}

\item{samples}{A data frame of evaluation samples in the same format as
\link{nes_samples}. Must contain all \code{sample_id} values present in
\code{completions}.}

\item{name}{Character. Name for the saved scores file. Defaults to the
\code{"name"} attribute of \code{completions} (set automatically by
\code{\link[=completions_generate]{completions_generate()}} and \code{\link[=completions_read]{completions_read()}}). If \code{NULL}, scores
are not saved to disk.}

\item{max_active}{Integer. Maximum number of simultaneous LLM grading
requests.}
}
\value{
A data frame with columns \code{sample_id}, \code{replicate}, \code{processable},
\code{exact_match}, \code{score} (integer, 0--5), \code{reasoning} (character), and
\code{tags} (list-column of character vectors).
}
\description{
Score completions against target outputs using a multi-tiered system:
\enumerate{
\item \strong{Processability}: Is the response non-\code{NA} and non-empty?
\item \strong{Exact match}: Does the response exactly match the target? If so,
score 5 without an LLM call.
\item \strong{LLM quality grading}: For non-exact-match processable completions,
an LLM judge scores the completion on a 0--5 scale.
}
}
