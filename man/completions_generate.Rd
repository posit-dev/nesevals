% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/completions.R
\name{completions_generate}
\alias{completions_generate}
\title{Generate completions from NES model endpoints}
\usage{
completions_generate(
  samples,
  model = c("qwen3-8b", "zeta"),
  prompt = c("zeta-supercomplete", "qwen-supercomplete", "rewrite-window",
    "tool-calling", "rewrite-region", "rewrite-region-5bt"),
  edit_history_format = c("diffs", "before_after", "narrative"),
  output_format = c("editable_region", "window", "tool_calling", "rewrite_region",
    "rewrite_region_5bt"),
  include_variables = TRUE,
  n_replicates = 1L,
  context_lines = 1L
)
}
\arguments{
\item{samples}{A data frame of evaluation samples in the same format as
\link{samples}.}

\item{model}{Either a string naming a Baseten model (\code{"qwen3-8b"} or
\code{"zeta"}) or an ellmer \link[ellmer:Chat]{ellmer::Chat} object (e.g. from
\code{\link[ellmer:chat_openai]{ellmer::chat_openai()}} or \code{\link[ellmer:chat_anthropic]{ellmer::chat_claude()}}). When a Chat object
is provided, the model name is derived from \code{chat$get_model()}. The
\code{"tool_calling"} output format is not supported with Chat objects.}

\item{prompt}{One of \code{"zeta-supercomplete"}, \code{"qwen-supercomplete"},
\code{"rewrite-window"}, \code{"tool-calling"}, or \code{"rewrite-region"}. Determines
which system prompt file to use from \verb{inst/prompts/}.}

\item{edit_history_format}{One of \code{"diffs"}, \code{"before_after"}, or
\code{"narrative"}.}

\item{output_format}{One of \code{"editable_region"}, \code{"window"},
\code{"tool_calling"}, or \code{"rewrite_region"}.}

\item{include_variables}{Logical. Whether to include variables in the prompt.}

\item{n_replicates}{Integer. Number of completions to generate per sample.}

\item{context_lines}{Integer. Number of context lines for before/after and
narrative edit history formats.}
}
\value{
Invisibly, a data frame with columns \code{sample_id}, \code{replicate},
\code{response} (character), \code{latency} (numeric, in seconds),
\code{tokens_input} (integer), \code{tokens_output} (integer), and \code{request}
(list-column containing the request body).
}
\description{
Send evaluation samples to a model endpoint and collect completions along
with response latency. Results are written to JSON files under
\verb{inst/results/completions/} and \verb{inst/results/metadata/}.
}
